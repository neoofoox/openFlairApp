<!--
  Generated template for the KuenstlerPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>
  <ion-navbar>
    <ion-title>KÃ¼nstler</ion-title>
      <button ion-button color="ofred" clear (click)='filterFavs()'>
        <ion-icon [name]="isFiltered() ? 'heart' : 'heart-outline'"></ion-icon>
      </button>
    
  </ion-navbar>
</ion-header>

<ion-content>
  <ion-searchbar (ionInput)="searchKuenstler($event)"></ion-searchbar>
    <ng-template ngFor let-element [ngForOf]="acts">
      <ion-card *ngIf="element.act.category == 1 && (!isFiltered() || isFav(element.act))">
        <div class="artist-image" *ngIf="element.act.image_attachment_urls[0] != undefined">
          <img cache=true src="http://open-flair.de{{element.act.image_attachment_urls[0].medium}}" />
        </div>
        <!-- FIXME: handle .tiff files e.g: No Faces -->
        <div class="artist-image" *ngIf="element.act.image_attachment_urls[0] == undefined">
          <img src="/assets/images/template.jpg" />
        </div>
        <ion-card-content>
          <ion-card-title>
            {{element.act.name}}
          </ion-card-title>
          <p>
            {{(element.act.description | slice:0:150) + (element.act.description.length > 100 ? '...' : '')}}
          </p>
        </ion-card-content>
          <ion-list *ngFor="let gig of element.act.gigs | orderBy:['day_date', 'begin.integer_time']">
            <button ion-item color="gigsBackground">
              {{(gig.day_name | slice:0:2) + ". " + (gig.begin.integer_time | formatTimeHhmm) + " " + gig.stage_name}}
            </button>
          </ion-list>
        <ion-row>
          <ion-col>
            <button (click)="toggleFav(element.act)" ion-button icon-left clear small>
              <ion-icon [name]="isFav(element.act) ? 'heart' : 'heart-outline'" color="ofred"></ion-icon>
              <div>Favorit</div>
            </button>
          </ion-col>
          <ion-col>
            <a href="{{element.act.homepage}}">
              <button ion-button icon-left clear small>
                <ion-icon name="link"></ion-icon>
                <div>Webseite</div>
              </button>
            </a>
          </ion-col>
        </ion-row>
      </ion-card>
    </ng-template>
</ion-content>